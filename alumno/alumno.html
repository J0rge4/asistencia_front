
<!DOCTYPE html>


<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel del Alumno</title>
  <link rel="stylesheet" href="../style.css"> <!-- Estilo compartido -->
</head>
<body>
  <header>Panel del Alumno</header>


  <!-- Botón para regresar al menú principal -->


  <div style="margin: 1rem;">
    <button onclick="window.location.href='../index.html'" style="background-color:#c62828; color:white; padding:10px;">⏻ Salir</button>
  </div>


  <!-- Contenedor principal -->


  <div class="container">
    <h2>Consultar Asistencia</h2>


<!-- Campo de matrícula del alumno -->
<input type="text" id="matricula" placeholder="Tu matrícula">

<!-- Botón para consultar -->
<button onclick="consultar()">Consultar</button>

<!-- Resultados de asistencia -->
<h3>Resultados</h3>
<ul id="resultado"></ul>

  </div>


<!-- Script que maneja la consulta al backend -->


<script>
// Dirección base de la API (reemplázala con tu URL real si es diferente)
const api = 'https://asistenciabackend-production-f2de.up.railway.app/';

// Función que consulta la asistencia de un alumno
async function consultar() {
  const mat = document.getElementById('matricula').value.trim(); // obtiene matrícula del input
  if (!mat) return alert('Escribe tu matrícula'); // validación

  try {
    const res = await fetch(`${api}/asistencia/${mat}`);
    if (!res.ok) throw new Error('No se pudo obtener los datos');
    const data = await res.json();

    const ul = document.getElementById('resultado');
    ul.innerHTML = '';

    if (data.length === 0) {
      ul.innerHTML = '<li>No hay registros de asistencia.</li>';
      return;
    }

    data.forEach(r => {
      ul.innerHTML += <li>${r.fecha}: ${r.presente ? '✅ Presente' : '❌ Ausente'}</li>;
    });
  } catch (err) {
    alert('Error al consultar asistencia: ' + err.message);
  }
}
</script>


</body>
</html>
